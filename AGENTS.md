# AIエージェント向けコンテキスト: devros

## プロジェクト概要
`devros` は、Rustで記述されたROS 2ワークフロー管理ツールです。ROS 2アプリケーションのための堅牢で効率的なビルド・デプロイシステムの提供を目指しています。

## エージェントへの主要な指針

1.  **仕様書の優先**:
    - アーキテクチャや機能に関する決定的な情報源は `specs/` ディレクトリにあります。
    - **機能を実装する前に**、必ず関連する仕様書（例：ビルドロジックなら `specs/04_build_system.md`）を熟読してください。
    - ユーザーの要求や実装の方向性が仕様書と矛盾する場合は、実装前にその旨を指摘してください。
    - 先に仕様を定義してから実装してください。
    - 仕様はあくまで仕様です。実装については一切書かないでください。
    - 仕様を定義したら、**必ずレビューを受けて承認を得てください**。

2.  **技術スタック**:
    - **言語**: Rust
    - **ターゲット**: Linux (主にROS 2エコシステム)

3.  **参考実装 (References)**:
    - `references/` ディレクトリには `colcon` (Python製) のソースコードと `reps`（ROS Enhancement Proposals）が含まれています。
    - 存在しない場合は、`scripts/clone_references.sh` を実行してクローンしてください。
    - ビルド順序の解決、パッケージの探索ロジック、引数の処理、`package.xml`のフォーマット（rep-0149.md）など、既存ツールの挙動を理解する必要がある場合は、これらのコードを参照してください。
    - **注意**: Pythonのロジックをそのままコピーするのではなく、**Rustとして自然な形（Idiomatic Rust）**で設計・再実装してください。

## ディレクトリ構成

- `specs/`: 設計仕様書。
- `references/`: 参考資料（Colconのソースコードなど）。
- `scripts/`: 開発支援用スクリプト。
- `crates/`: Rustソースコード（今後実装）。

## 開発用スクリプト

### 参考実装のクローン (`scripts/clone_references.sh`)
`references/` ディレクトリに、参考実装となる `colcon` 関連のリポジトリ (`colcon-core`, `colcon-bash`, `colcon-ros`) をクローンします。

```bash
./scripts/clone_references.sh
```

## コーディング規約

- **Rust**:
    - 標準的なRustのイディオムに従ってください（`clippy` 準拠）。

## タスク管理

- **ロードマップ**: プロジェクトの進捗は `tasks/` ディレクトリ内のファイル（主に `00_roadmap.md`）で管理されます。
- **更新**: タスクに着手する前、および完了した後は、必ずロードマップの該当項目（チェックボックス）を更新し、現在の状況を明確にしてください。
